import type { NextPage } from 'next'
import Head from 'next/head'
import {trpc} from "../utils/trpc";
import Link from "next/link";

const Home: NextPage = () => {

  const {data,isLoading} = trpc.useQuery(["questions.get-all-my-questions"])

  if(isLoading || !data) return <div>Loading..</div>

  return (
    <div className="flex justify-center">
      <Head>
        <title>Stairs</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main  className="flex flex-col gap-2 container max-w-screen-xl my-10">
        <div className="flex justify-between items-center mb-4">
          <h1 className="text-4xl font-bold ">Questions</h1>
          <Link href="/create"><span className="text-xl border bg-pink-300 border-pink-300 p-2 rounded-md cursor-pointer hover:bg-pink-400 duration-200 delay-10">Create a Poll</span></Link>
        </div>
          {data.map((question,idx)=>
            <div key={idx} className="rounded-md w-fit border border-white p-4 cursor-pointer hover:border-pink-500 duration-200 delay-10">
              <Link href={`/question/${question.id}`}>
                <span>
                  <h2 className="text-xl">
                    {question.question}
                  </h2>
                  <p className="text-sm text-gray-400">
                    Created at  : {question.createdAt.toDateString()}
                  </p>
                </span>
              </Link>
            </div>
          )}
      </main>
    </div>
  )
}

export default Home
